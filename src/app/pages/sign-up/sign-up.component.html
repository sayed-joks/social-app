<section class="bg-white dark:bg-gray-900">
  <div
    class="container flex items-center justify-center min-h-screen px-6 mx-auto"
  >
    <form
      class="w-full max-w-md"
      [formGroup]="registerForm"
      (ngSubmit)="addSubmit()"
    >
      <div class="flex justify-center mx-auto">
        <img
          class="w-auto h-7 sm:h-8"
          src="https://merakiui.com/images/logo.svg"
          alt=""
        />
      </div>
      @if ((registerForm.get('name')?.touched &&
      registerForm.get('name')?.invalid) || (registerForm.get('email')?.touched
      && registerForm.get('email')?.invalid) ||
      (registerForm.get('password')?.touched &&
      registerForm.get('password')?.invalid) ||
      ((registerForm.get('rePassword')?.touched &&
      registerForm.hasError('missmatch')) ||
      registerForm.errors?.['passwordMismatch']) ||
      (registerForm.get('dateOfBirth')?.touched &&
      registerForm.get('dateOfBirth')?.invalid) ||
      (registerForm.get('gender')?.touched &&
      registerForm.get('gender')?.invalid)) {
      <div
        class="flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400 mt-4"
        role="alert"
      >
        <div>
          <ul class="mt-1.5 list-disc list-inside">
            @if (registerForm.get('name')?.touched &&
            registerForm.get('name')?.invalid) {
            <li class="text-danger">{{ nameErrorMessage }}</li>
            } @if (registerForm.get('email')?.touched &&
            registerForm.get('email')?.invalid) {
            <li class="text-danger">{{ emailErrorMessage }}</li>
            } @if (registerForm.get('password')?.touched &&
            registerForm.get('password')?.invalid) {
            <li class="text-danger">{{ passwordErrorMessage }}</li>
            } @if (registerForm.get('rePassword')?.touched &&
            registerForm.hasError('missmatch')) {
            <li class="text-danger">{{ rePasswordErrorMessage }}</li>
            } @if (registerForm.get('dateOfBirth')?.touched &&
            registerForm.get('dateOfBirth')?.invalid) {
            <li class="text-danger">{{ dateOfBirthErrorMessage }}</li>
            } @if (registerForm.get('gender')?.touched &&
            registerForm.get('gender')?.invalid) {
            <li class="text-danger">{{ genderErrorMessage }}</li>
            }
          </ul>
        </div>
      </div>
      } @if (errorMsg) {
      <div class="alert alert-error p-2 mt-4 capitalize" role="alert">
        {{ errorMsg }}
      </div>
      } @if (isSuccess) {
      <div class="alert alert-outline alert-success mt-4 p-2" role="alert">
        {{ isSuccess }}
      </div>
      }

      <div class="mt-8">
        <label for="name" class="block text-sm font-medium mb-2 dark:text-white"
          >Full Name</label
        >
        <input
          formControlName="name"
          type="text"
          id="name"
          class="py-2.5 sm:py-3 px-4 block w-full border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-gray-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
          placeholder="Full Name"
        />
      </div>

      <div class="mt-6">
        <label
          for="email"
          class="block text-sm font-medium mb-2 dark:text-white"
          >Email</label
        >
        <input
          formControlName="email"
          type="email"
          id="email"
          class="py-2.5 sm:py-3 px-4 block w-full border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-gray-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
          placeholder="you@site.com"
        />
      </div>

      <div class="mt-4">
        <label class="block text-sm mb-2 dark:text-white">Password</label>
        <div class="relative">
          <input
            formControlName="password"
            id="hs-toggle-password1"
            type="password"
            class="py-2.5 sm:py-3 ps-4 pe-10 block w-full border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-gray-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
            placeholder="Enter password"
          />
          <button
            type="button"
            data-hs-toggle-password='{
        "target": "#hs-toggle-password1"
      }'
            class="absolute inset-y-0 end-0 flex items-center z-20 px-3 cursor-pointer text-gray-400 rounded-e-md focus:outline-hidden focus:text-blue-600 dark:text-neutral-600 dark:focus:text-blue-500"
          >
            <svg
              class="shrink-0 size-3.5"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path
                class="hs-password-active:hidden"
                d="M9.88 9.88a3 3 0 1 0 4.24 4.24"
              ></path>
              <path
                class="hs-password-active:hidden"
                d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"
              ></path>
              <path
                class="hs-password-active:hidden"
                d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"
              ></path>
              <line
                class="hs-password-active:hidden"
                x1="2"
                x2="22"
                y1="2"
                y2="22"
              ></line>
              <path
                class="hidden hs-password-active:block"
                d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"
              ></path>
              <circle
                class="hidden hs-password-active:block"
                cx="12"
                cy="12"
                r="3"
              ></circle>
            </svg>
          </button>
        </div>
      </div>

      <div class="mt-4">
        <label class="block text-sm mb-2 dark:text-white"
          >Confirme Password</label
        >
        <div class="relative">
          <input
            formControlName="rePassword"
            id="hs-toggle-password2"
            type="password"
            class="py-2.5 sm:py-3 ps-4 pe-10 block w-full border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-gray-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
            placeholder="Enter Confirme Password"
          />
          <button
            type="button"
            data-hs-toggle-password='{
        "target": "#hs-toggle-password2"
      }'
            class="absolute inset-y-0 end-0 flex items-center z-20 px-3 cursor-pointer text-gray-400 rounded-e-md focus:outline-hidden focus:text-blue-600 dark:text-neutral-600 dark:focus:text-blue-500"
          >
            <svg
              class="shrink-0 size-3.5"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path
                class="hs-password-active:hidden"
                d="M9.88 9.88a3 3 0 1 0 4.24 4.24"
              ></path>
              <path
                class="hs-password-active:hidden"
                d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"
              ></path>
              <path
                class="hs-password-active:hidden"
                d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"
              ></path>
              <line
                class="hs-password-active:hidden"
                x1="2"
                x2="22"
                y1="2"
                y2="22"
              ></line>
              <path
                class="hidden hs-password-active:block"
                d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"
              ></path>
              <circle
                class="hidden hs-password-active:block"
                cx="12"
                cy="12"
                r="3"
              ></circle>
            </svg>
          </button>
        </div>
      </div>

      <div class="mt-6">
        <label for="date" class="block text-sm font-medium mb-2 dark:text-white"
          >Date of Birth</label
        >
        <input
          formControlName="dateOfBirth"
          type="date"
          id="date"
          class="py-2.5 sm:py-3 px-4 block w-full border-gray-200 rounded-lg sm:text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-gray-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
        />
      </div>

      <div class="relative flex items-center mt-4 gap-4">
        <div class="flex items-center gap-1">
          <input
            formControlName="gender"
            type="radio"
            class="radio radio-inset radio-primary"
            value="male"
          />
          <label class="label-text text-base dark:text-white" for="radioType3">
            Male
          </label>
        </div>
        <div class="flex items-center gap-1">
          <input
            formControlName="gender"
            type="radio"
            class="radio radio-inset radio-primary"
            value="female"
          />
          <label class="label-text text-base text-white" for="radioType4">
            Female
          </label>
        </div>
      </div>

      <div class="mt-6">
        <button
          [disabled]="registerForm.invalid || isLoading"
          [attr.aria-busy]="isLoading ? true : null"
          class="w-full flex justify-center items-center gap-4 px-6 py-3 text-sm font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-blue-500 rounded-lg hover:bg-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-50"
        >
          Sign Up@if(isLoading){
          <span
            ><svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
            >
              <circle cx="4" cy="12" r="3" fill="currentColor">
                <animate
                  id="svgSpinners3DotsFade0"
                  fill="freeze"
                  attributeName="opacity"
                  begin="0;svgSpinners3DotsFade1.end-0.25s"
                  dur="0.75s"
                  values="1;0.2"
                />
              </circle>
              <circle cx="12" cy="12" r="3" fill="currentColor" opacity="0.4">
                <animate
                  fill="freeze"
                  attributeName="opacity"
                  begin="svgSpinners3DotsFade0.begin+0.15s"
                  dur="0.75s"
                  values="1;0.2"
                />
              </circle>
              <circle cx="20" cy="12" r="3" fill="currentColor" opacity="0.3">
                <animate
                  id="svgSpinners3DotsFade1"
                  fill="freeze"
                  attributeName="opacity"
                  begin="svgSpinners3DotsFade0.begin+0.3s"
                  dur="0.75s"
                  values="1;0.2"
                />
              </circle></svg
          ></span>
          }
        </button>

        <div class="mt-6 text-center">
          <a
            href="#"
            class="text-sm text-blue-500 hover:underline dark:text-blue-400"
          >
            Already have an account?
          </a>
        </div>
      </div>
    </form>
  </div>
</section>
